<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso de Análise de Dados com Python</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Curso de Análise de Dados com Python</h1>
        <p>Aprenda do básico ao avançado com teoria, exemplos e exercícios interativos!</p>
    </header>

    <main>
        <section id="introducao">
            <h2>Módulo 1: Introdução à Análise de Dados</h2>
            <p>Nesta seção, vamos aprender os fundamentos da Análise de Dados com Python e como manipular datasets usando Pandas.</p>
        </section>

        <section id="editor">
            <h2>Teste seu Código</h2>
            <textarea id="code-editor" placeholder="Digite seu código Python aqui..."></textarea>
            <button onclick="runPython()">Executar</button>
            <pre id="output"></pre>
        </section>
    </main>

    <!-- Carregando Pyodide versão corrigida -->
    <script src="https://cdn.jsdelivr.net/npm/pyodide@0.22.1/pyodide.js"></script>
    <script>
        let pyodideReadyPromise;

        async function loadPyodideAndRun() {
            if (!pyodideReadyPromise) {
                pyodideReadyPromise = loadPyodide();
            }
            let pyodide = await pyodideReadyPromise;
            await pyodide.loadPackage(['pandas', 'matplotlib']);
            return pyodide;
        }

        async function runPython() {
            let code = document.getElementById("code-editor").value;
            let outputElement = document.getElementById("output");

            try {
                let pyodide = await loadPyodideAndRun();
                let output = await pyodide.runPythonAsync(code);
                outputElement.textContent = output;
            } catch (error) {
                outputElement.textContent = "Erro ao executar o código: " + error;
                console.error(error);
            }
        }

        loadPyodideAndRun();
    </script>
</body>
</html>
